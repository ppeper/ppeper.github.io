{"componentChunkName":"component---src-templates-post-jsx","path":"/mybatis/","result":{"data":{"site":{"siteMetadata":{"title":"ppeperğŸ¥¤"}},"markdownRemark":{"id":"6f833f05-dee9-5c14-9e3b-b074ed213e8d","excerpt":"ê¸°ì¡´ì˜ ìë°”ì—ì„œì˜ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì—°ê²°ì€ JDBCë¥¼ ì‚¬ìš©í•˜ì—¬ Connectionê³¼ Statementë¥¼ ê°€ì ¸ì™€ SQLë¬¸ì„ ì „ì†¡í•˜ê³  ê²°ê³¼ê°’ì„ ë°›ì•˜ì—ˆë‹¤. ì´ëŸ¬í•œ ì½”ë“œë¥¼ í†µí•´ ê¸°ì¡´ì—ëŠ” JDBCì˜ ì—°ë™ê³¼ì •ê³¼ ìë°” ì½”ë“œì•ˆì— SQLë¬¸ì´ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— ì½”ë“œê°€ ë³µì¡í•˜ì˜€ë‹¤. ì´ì— ëŒ€í•œ í¸ì˜ì„±ì„ ì œê³µí•´ ì£¼ëŠ” MyBatis Frameworkì— ëŒ€í•´ì„œ ì •ë¦¬í•´ ë³´ë ¤ê³  í•œë‹¤.(Myâ€¦","html":"<p>ê¸°ì¡´ì˜ ìë°”ì—ì„œì˜ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì—°ê²°ì€ JDBCë¥¼ ì‚¬ìš©í•˜ì—¬ Connectionê³¼ Statementë¥¼ ê°€ì ¸ì™€ SQLë¬¸ì„ ì „ì†¡í•˜ê³  ê²°ê³¼ê°’ì„ ë°›ì•˜ì—ˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ ì½”ë“œë¥¼ í†µí•´ ê¸°ì¡´ì—ëŠ” JDBCì˜ ì—°ë™ê³¼ì •ê³¼ ìë°” ì½”ë“œì•ˆì— SQLë¬¸ì´ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— ì½”ë“œê°€ ë³µì¡í•˜ì˜€ë‹¤. ì´ì— ëŒ€í•œ í¸ì˜ì„±ì„ ì œê³µí•´ ì£¼ëŠ” <strong>MyBatis</strong> Frameworkì— ëŒ€í•´ì„œ ì •ë¦¬í•´ ë³´ë ¤ê³  í•œë‹¤.<a href=\"https://mybatis.org/mybatis-3/ko/getting-started.html\">(MyBatis ì‹œì‘í•˜ê¸°)</a></p>\n<hr>\n<img src=\"https://user-images.githubusercontent.com/63226023/218615605-d818077a-1d12-4077-91f3-134bd4481407.png\">\n<h1>MyBatis</h1>\n<p>MyBatisëŠ” <code class=\"language-text\">Java Object</code>ì™€ <code class=\"language-text\">SQL</code>ë¬¸ ì‚¬ì´ì˜ ìë™ Mapping ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” <strong>ORM (Object Relational Mapping) Framework</strong> ì´ë‹¤.</p>\n<ul>\n<li>MyBatisëŠ” SQLì„ ë³„ë„ì˜ íŒŒì¼ë¡œ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•œë‹¤.</li>\n<li>Objectì™€ SQL ì‚¬ì´ì˜ <code class=\"language-text\">parameter mapping</code> ì‘ì—…ì„ ìë™ìœ¼ë¡œ í•´ì¤€ë‹¤.</li>\n<li>SQLì„ ê·¸ëŒ€ë¡œ ì´ìš©í•˜ë©´ì„œ ë„ë©”ì¸ ê°ì²´ë‚˜ VO ê°ì²´ë¥¼ ì¤‘ì‹¬ì„ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<blockquote>\n<p>MyBatisëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ì—°ë™ì„ ë„ì™€ì£¼ì–´ SQLë¬¸ê³¼ ë¶„ë¦¬í•´ ì£¼ëŠ” Frameworkì´ë‹¤.</p>\n</blockquote>\n<h4>MyBatisì˜ íŠ¹ì§•</h4>\n<ul>\n<li>\n<p>ì‰¬ìš´ ì ‘ê·¼ì„±ê³¼ ì½”ë“œì˜ ê°„ê²°í•¨</p>\n<ul>\n<li>ê°€ì¥ ê°„ë‹¨í•œ persistence frameworkì´ë‹¤</li>\n<li>JDBCì˜ ëª¨ë“  ê¸°ëŠ¥ì„ MyBatisê°€ ëŒ€ë¶€ë¶„ ì œê³µ</li>\n<li>JDBC ê´€ë ¨ ì½”ë“œë¥¼ ê±·ì–´ë‚´ì–´ ì†ŒìŠ¤ì½”ë“œê°€ ê°„ê²°í•´ì§.</li>\n<li>ìˆ˜ë™ì ì¸ parameter ì„¤ì •ê³¼ Query ê²°ê³¼ì— ëŒ€í•œ mapping êµ¬ë¬¸ì„ ì œê±°</li>\n</ul>\n</li>\n<li>\n<p>SQLë¬¸ê³¼ í”„ë¡œê·¸ë˜ë° ì½”ë“œì˜ ë¶„ë¦¬</p>\n<ul>\n<li>SQLì— ë³€ê²½ì´ ìˆì„ ë•Œë§ˆë‹¤ ìë°” ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì»´íŒŒì¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</li>\n</ul>\n</li>\n<li>\n<p>ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ êµ¬í˜„ê°€ëŠ¥</p>\n<ul>\n<li>JAVA, C#, .NET, Ruby, â€¦</li>\n</ul>\n</li>\n</ul>\n<h4>MyBatisë¥¼ ì‚¬ìš©í•œ DB Access Architecture</h4>\n<img src=\"https://user-images.githubusercontent.com/63226023/221234211-60dd3f6f-0bbf-417d-b04b-d6600e13a74e.png\">\n<h2>MyBatis 3ì˜ ì£¼ìš” Component</h2>\n<h4>MyBatisì˜ ì£¼ìš” Componentì˜ Data Access</h4>\n<img src=\"https://user-images.githubusercontent.com/63226023/221233890-8679c44f-b977-4c6b-8aa0-8a160f70f84c.png\">\n<table>\n<thead>\n<tr>\n<th>íŒŒì¼</th>\n<th>ì„¤ëª…</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>MyBatis ì„¤ì • íŒŒì¼ <br> (mybatis-config.xml)</td>\n<td>ë°ì´í„°ë°ì´ìŠ¤ì˜ ì ‘ì† ì£¼ì†Œ ì •ë³´ë‚˜ ê°ì²´ì˜ alias, Mapping íŒŒì¼ì˜ ê²½ë¡œ ë“±ì˜ ê³ ì •ëœ í™˜ê²½ ì •ë¶€ë¥¼ ì„¤ì •í•œë‹¤.</td>\n</tr>\n<tr>\n<td>SqlSessionFactoryBuilder</td>\n<td>MyBatis ì„¤ì • íŒŒì¼ì„ ë°”íƒ•ìœ¼ë¡œ SqlSessionFactoryë¥¼ ìƒì„±í•œë‹¤.</td>\n</tr>\n<tr>\n<td>SqlSessionFactory</td>\n<td>SqlSessionì„ ìƒì„±í•œë‹¤.</td>\n</tr>\n<tr>\n<td>SqlSession</td>\n<td>í•µì‹¬ì ì¸ ì—­í• ì„ í•˜ëŠ” Classë¡œ <strong>SQL ì‹¤í–‰ ë° Transaction ê´€ë¦¬ë¥¼ ì‹¤í–‰</strong> í•œë‹¤.<br>SqlSession ê°ì²´ëŠ” Thread-safe í•˜ì§€ ì•Šì•„ threadë§ˆë‹¤ í•„ìš”ì— ë”°ë¼ ìƒì„±í•œë‹¤.</td>\n</tr>\n<tr>\n<td>mapping íŒŒì¼<br>(member.xml)</td>\n<td>SQL ë¬¸ê³¼ ORMMappingì„ ì„¤ì •í•œë‹¤.</td>\n</tr>\n</tbody>\n</table>\n<h2>ê¸°ë³¸ ì‚¬ìš©</h2>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>x.x.x<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h4>Java Configë¥¼ í†µí•˜ì—¬ SqlSessionFactory íŒŒì¼ ì„¤ì •</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Reader</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Resources</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSession</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSessionFactory</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SqlSessionFactoryBuilder</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SqlMapConfig</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">SqlSessionFactory</span> factory<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">static</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">String</span> resource <span class=\"token operator\">=</span> <span class=\"token string\">\"mybatis-config.xml\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">Reader</span> reader <span class=\"token operator\">=</span> <span class=\"token class-name\">Resources</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsReader</span><span class=\"token punctuation\">(</span>resource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tfactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>reader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">SqlSession</span> <span class=\"token function\">getSqlSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">openSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>SqlSessionFactoryë¥¼ ë¹Œë“œí•œ í›„ <code class=\"language-text\">openSession()</code> ë©”ì†Œë“œë¥¼ í†µí•˜ì—¬ SqlSessionì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. SqlSessionì€ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•´ SQL ëª…ë ¹ë¬¸ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ëª¨ë“  ë©”ì†Œë“œë“¤ì„ ê°€ì§€ê³  ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SqlSession</span> session <span class=\"token operator\">=</span> <span class=\"token class-name\">SqlMapConfig</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSqlSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Blog</span> blog <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span><span class=\"token function\">selectOne</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"org.mybatis.example.BlogMapper.selectBlog\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">101</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>Mapper Interface</h1>\n<p>Mapper InterfaceëŠ” mapping íŒŒì¼ì— ê¸°ì¬ëœ SQLì„ í˜¸ì¶œí•˜ê¸° ìœ„í•œ Interfaceì´ë‹¤.</p>\n<ul>\n<li>Mapper InterfaceëŠ” SQLì„ í˜¸ì¶œí•˜ëŠ” í”„ë¡œê·¸ë¨ì„ Type Safeí•˜ê²Œ ê¸°ìˆ í•˜ê¸° ìœ„í•´ <code class=\"language-text\">MyBatis 3.x</code> ë¶€í„° ë“±ì¥í•˜ì˜€ë‹¤.</li>\n<li>Mapping íŒŒì¼ì— ìˆëŠ” SQLì„ <strong>java interfaceë¥¼ í†µí•´ í˜¸ì¶œ</strong> í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.</li>\n</ul>\n<p>Mapper Interfaceë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì—ëŠ” SQLì„ í˜¸ì¶œí•˜ëŠ” í”„ë¡œê·¸ë¨ì€ SqlSessionì˜ ë©”ì†Œë“œì˜ ì¸ìë¡œ <strong>namespace.(SQL ID)</strong> ìœ¼ë¡œ ì§€ì • í•´ì•¼í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">namespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.test.UserDao<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>String<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mapper</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>DAOì—ì„œ ì‚¬ìš©í• ë•ŒëŠ” <code class=\"language-text\">sqlSession.selectOne(\"com.test.UserDao.search\", userid)</code> ë¡œ ì‚¬ìš©</p>\n<p>Mapper Interfaceë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë¬¸ìì—´ë¡œ ì§€ì •í•˜ê¸°ë•Œë¬¸ì— ì˜¤íƒ€ì— ì˜í•œ ë²„ê·¸ê°€ ìƒê¸°ê±°ë‚˜, IDEì—ì„œ ì œê³µí•˜ëŠ” code assistë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</p>\n<h3>Mapper Interfaceë¥¼ ì‚¬ìš©í–ˆì„ ê²½ìš°</h3>\n<p>Mapper Interfaceë¥¼ ì‚¬ìš©í•  ê²½ìš° <strong>UserMapper Interface</strong> ëŠ” ê°œë°œìê°€ ì‘ì„±í•´ ì¤€ë‹¤.</p>\n<p>namespace ì†ì„±ì—ëŠ” packageë¥¼ í¬í•¨í•œ Mapper Interfaceì˜ ì´ë¦„ì„ ì‘ì„±í•˜ê³  SQL IDì—ëŠ” <strong>mappingí•˜ëŠ” methodì˜ ì´ë¦„ê³¼ ê°™ê²Œ ì§€ì •í•´ ì£¼ì–´ì•¼í•œë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">namespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.test.dao.UserMapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>String<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mapper</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// UserMapper ì¸í„°í˜ì´ìŠ¤</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserMapper</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// ë©”ì†Œë“œ ì´ë¦„ê³¼ idì˜ ì´ë¦„ì´ ë™ì¼í•˜ë‹¤.</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">UserDto</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>userid<span class=\"token operator\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>í•´ë‹¹ Mapper InterfaceëŠ” êµ¬í˜„í•  í•„ìš”ì—†ì´ <code class=\"language-text\">mapper.search(userid);</code> ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>\n<hr>\n<h1>MyBatis - Spring</h1>\n<ul>\n<li>MyBatisë¥¼ Stand alone í˜•íƒœë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” , <code class=\"language-text\">SqlSessionFactory</code> ê°ì²´ë¥¼ ì§ì ‘ ì‚¬ìš©í•œë‹¤.</li>\n<li>Springì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, Spring Containerì— MyBatis ê´€ë ¨ <code class=\"language-text\">Bean</code> ì„ ë“±ë¡í•˜ì—¬ MyBatisë¥¼ ì‚¬ìš©í•œë‹¤.</li>\n<li>MyBatisë¥¼ Springê³¼ ì—°ë™í•˜ê¸° ìœ„í•´ì„œëŠ” MyBatisì—ì„œ ì œê³µí•˜ëŠ” Spring ì—°ë™ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•˜ë‹¤.</li>\n</ul>\n<h2>dependency ì¶”ê°€í•˜ê¸°</h2>\n<p>Maven í”„ë¡œì íŠ¸ì—ì„œì˜ dependencyë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>x.x.x<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- mybatisì™€ spring ì—°ë™ --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.mybatis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mybatis-spring<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>x.x.x<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- springì—ì„œ dbì™€ transaction ì²˜ë¦¬ --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-tx<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${org.springframework-version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- database ì²˜ë¦¬ --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-jdbc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${org.springframework-version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>DataSource ì„¤ì •</h2>\n<p>ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ìŠ¤í”„ë§ì—ì„œ DataSourceë¥¼ ê´€ë¦¬í•˜ë¯€ë¡œ MyBatis ì„¤ì •íŒŒì¼ì—ì„œëŠ” ì¼ë¶€ ì„¤ì •ì„ ìƒëµí•œë‹¤.</p>\n<p>ìŠ¤í”„ë§ í™˜ê²½ ì„¤ì •íŒŒì¼(application-context.xml) ì— DataSourceë¥¼ ì„¤ì • í•œë‹¤. MyBatisì™€ ìŠ¤í”„ë§ì„ ì—°ë™í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •ê³¼ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ëŠ” ìŠ¤í”„ë§ì—ì„œ ê´€ë¦¬í•œë‹¤.</p>\n<ul>\n<li>ì¼ë°˜ Connection ì„¤ì •</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ds<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.SimpleDriverDataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>close<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> \n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClass<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span> \n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/mydb?serverTimezone=UTC<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>useUniCode=yes<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>characterEncoding=UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span> \n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pw<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>\n<p>Connection Pool ì„¤ì •</p>\n<ul>\n<li>ì‹œìŠ¤í…œ ìì›ì¸ Connectionì„ pool í˜•íƒœë¡œ ê´€ë¦¬í•˜ì—¬, ì—°ê²°í•˜ê³  ë°˜ë‚©í• ë•Œì˜ ì‹œê°„ì„ ì ˆì•½.</li>\n<li>ì„œë²„ë‹¹ Connectionì˜ ìˆ˜ë¥¼ í†µì œí•˜ì—¬ ì „ì²´ ì‹œìŠ¤í…œ ì¥ì• ë¡œ ì „íŒŒë˜ëŠ”ê²ƒì„ ë°©ì§€í•œë‹¤.</li>\n<li>apache common dbcp2, hikari dbcp ë“±ì´ ìˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ds<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.commons.dbcp2.BasicDataSource<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>close<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/mydb?serverTimezone=UTC<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>useUniCode=yes<span class=\"token entity named-entity\" title=\"&amp;\">&amp;amp;</span>characterEncoding=UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pw<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token comment\">&lt;!-- connection pool í¬ê¸° ì„¤ì • --></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>initialSize<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxTotal<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxIdle<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>minIdle<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token comment\">&lt;!-- connection poolì— ì—¬ìœ ê°€ ì—†ì„ë•Œ ëŒ€ê¸°ì‹œê°„ --></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxWaitMillis<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>íŠ¸ëœì­ì…˜ ê´€ë¦¬ì ì„¤ì •</h2>\n<p>transactionManager ì•„ì´ë””ë¥¼ ê°€ì§„ ë¹ˆì€ íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì´ë‹¤. MyBatisëŠ” JDBCë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— <strong>DataSourceTransactionManager</strong> íƒ€ì…ì˜ ë¹ˆì„ ì‚¬ìš©í•œë‹¤.</p>\n<p><code class=\"language-text\">tx:annotation-driven</code> ìš”ì†ŒëŠ” íŠ¸ëœì­ì…˜ ê´€ë¦¬ë°©ë²•ì„ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì„ ì–¸í•˜ë„ë¡ ì„¤ì •í•˜ì—¬ ìŠ¤í”„ë§ì€ ë©”ì†Œë“œ, í´ë˜ìŠ¤ì— <strong>@Transactional</strong> ì´ ì„ ì–¸ë˜ì–´ ìˆìœ¼ë©´, AOPë¥¼ í†µí•´ íŠ¸ëœì­ì…˜ì„ ì²˜ë¦¬í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transactionManager<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ds<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h4>ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ íŠ¸ëœì­ì…˜ ì„¤ì •</h4>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">tx:</span>annotation-driven</span> <span class=\"token attr-name\">transaction-manager</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>transactionManager<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2>SqlSessionFactoryBean</h2>\n<p>MyBatis ì• í”Œë¦¬ì¼€ì´ì…˜ì€ SqlSessionFactoryë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ìˆ˜í–‰í•˜ì—¬ ìŠ¤í”„ë§ì—ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ë¹ˆìœ¼ë¡œ <strong>SqlSessionFactoryBean</strong> ë¥¼ ë“±ë¡í•´ì•¼ í•œë‹¤.</p>\n<p>í•´ë‹¹ SqlSessionFactoryBeanì„ ë“±ë¡í•  ë•Œ, ì‚¬ìš©í•  DataSource ë° mybatisì˜ ì„¤ì •íŒŒì¼ ì •ë³´ê°€ í•„ìš”í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ds<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.commons.dbcp2.BasicDataSource<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">destroy-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>close<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- MyBatis-Spring ì„¤ì • --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sqlSessionFactoryBean<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.mybatis.spring.SqlSessionFactoryBean<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ds<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>configLocation<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>classpath:mybatis-config.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mapperLocations<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>list</span><span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>classpath:guestbook.xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span>classpath:member.xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>value</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>list</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>í•´ë‹¹í•˜ëŠ” dataSource, configurationì„ ì„¤ì •í•˜ê³  <code class=\"language-text\">mapperLocations</code> ë¡œ í•´ë‹¹í•˜ëŠ” SQLë¬¸ì´ ìˆëŠ” mappingíŒŒì¼ì„ ê°ê° ë“±ë¡í•´ ì¤„ ìˆ˜ ìˆë‹¤.</p>\n<p><strong>classpath:</strong> ì˜ ê²½ë¡œëŠ” defaultë¡œ <code class=\"language-text\">projectname/src/main/resources/</code>, <code class=\"language-text\">projectname/src/main/java/</code> ì˜ ë‘ ê³³ì„ ì˜ë¯¸í•˜ê³  ìˆë‹¤.</p>\n<img src=\"https://user-images.githubusercontent.com/63226023/221350133-e3de69e0-0ad2-4725-b7d1-e76d5fbdd54b.png\">\n<p>mapper íŒŒì¼ë“¤ì´ ë§ì•„ì§ˆ ê²½ìš° ì¼ì¼ì´ ë‹¤ ë“±ë¡ì„ í•´ì£¼ê¸°ì— ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆìœ¼ë¯€ë¡œ <strong>mapper scanner</strong> ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- bace-package í•˜ìœ„ì˜ ëª¨ë“  ë§¤í¼ ì¸í„°í˜ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ë“±ë¡ëœë‹¤. --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">mybatis-spring:</span>scan</span> <span class=\"token attr-name\">base-package</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.test.mapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2>MyBatis Configuration (mybatis-config.xml)</h2>\n<p>ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë©´ DB ì ‘ì†ì •ë³´ ë° Mapper ê´€ë ¨ ì„¤ì •ì€ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì—¬ ê´€ë¦¬í•˜ë¯€ë¡œ MyBatis í™˜ê²½ì„¤ì • íŒŒì¼ì—ì„œëŠ” ìŠ¤í”„ë§ì—ì„œ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ì¼ë¶€ ì •ë³´ë§Œ ì„¤ì •í•œë‹¤. (ex. typeAlias, typeHandler..)</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?></span>\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">configuration</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span> \n    <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span><span class=\"token punctuation\">></span></span>\n    \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAliases</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAlias</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xxx.model.MemberDto<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>member<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>typeAliases</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>Mapper íŒŒì¼</h2>\n<p>mapper íŒŒì¼ë“¤ì—ì„œ ìœ„ì˜ typeAliasë¡œ ì„¤ì •í•œ nameìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">namespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.xxx.mapper.UserDao<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>login<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>map<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>member<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        select *\n        from mydb\n        where userid = #{userid} and userpwd = #{userpwd}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n    \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mapper</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h4>ìœ„ì—ì„œ Mapper Interfaceì—ì„œ ë³´ì•˜ë˜ SQL IDëŠ” mappingí•˜ëŠ” ë©”ì†Œë“œì´ë¦„ê³¼ ë™ì¼í•´ì•¼ í•œë‹¤.</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserDao</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberDto</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> map<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Mapperê°€ ì„¤ì •ì´ ì™„ë£Œ ë˜ì—ˆìœ¼ë©´ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•˜ì—¬ ì‚¬ìš©í•˜ë ¤ëŠ” Mapper Interfaceë¥¼ ë°ì´í„°ì ‘ê·¼ ê°ì²´ì™€ ì˜ì¡´ê´€ê³„ë¥¼ ì„¤ì •í•˜ì—¬ ì‚¬ìš©í•œë‹¤.</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserServiceImpl</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n    \n   <span class=\"token annotation punctuation\">@Autowired</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserDao</span> dao<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MemberDto</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> map<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"userid\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"userpwd\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">return</span> dao<span class=\"token punctuation\">.</span><span class=\"token function\">login</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Spring + MyBatis ì‚¬ìš©í•˜ê¸°","date":"February 25, 2023","update":"February 25, 2023","tags":["Spring","MyBatis"],"series":"MyBatis"},"fields":{"slug":"/mybatis/","readingTime":{"minutes":10.445}}},"seriesList":{"edges":[{"node":{"id":"6f833f05-dee9-5c14-9e3b-b074ed213e8d","fields":{"slug":"/mybatis/"},"frontmatter":{"title":"Spring + MyBatis ì‚¬ìš©í•˜ê¸°"}}}]},"previous":{"fields":{"slug":"/spring-mvc/"},"frontmatter":{"title":"Spring Web MVC í”„ë ˆì„ì›Œí¬ ë³´ê¸°"}},"next":{"fields":{"slug":"/springboot/"},"frontmatter":{"title":"ìŠ¤í”„ë§ì„ í¸í•˜ê²Œ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•´ë³´ì"}}},"pageContext":{"id":"6f833f05-dee9-5c14-9e3b-b074ed213e8d","series":"MyBatis","previousPostId":"b29539be-5960-51b1-b9c6-cafc98cb6f94","nextPostId":"25066a66-4883-50a8-9ab2-c92296bdba0e"}},"staticQueryHashes":[],"slicesMap":{}}