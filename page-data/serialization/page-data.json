{"componentChunkName":"component---src-templates-post-jsx","path":"/serialization/","result":{"data":{"site":{"siteMetadata":{"title":"ppeperğŸ¥¤"}},"markdownRemark":{"id":"770fa80e-3899-50bc-a219-6f0a4abde7eb","excerpt":"ì„œë²„ì—ì„œ REST APIë¥¼ êµ¬í˜„í•˜ì—¬ ë°ì´í„°ë¥¼ ë‹¤ë£°ë•ŒëŠ” Json ë°ì´í„° í˜•íƒœë¡œ ë§ì´ ë‹¤ë£¨ê²Œ ëœë‹¤. ì•ˆë“œë¡œì´ë“œì—ì„œ ì„œë²„ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ë•Œ í¸ë¦¬í•˜ê²Œ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ ê°ì²´-Json ê°„ì˜ Converter ì‘ì—…ì„ í•˜ì˜€ì—ˆë‹¤. ì´ë²ˆì— êµ¬ê¸€ í”„ë¡œì íŠ¸ë¥¼ ë³´ë©´ì„œ ìƒˆë¡œìš´ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ë‹¤ë£° ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë³´ë ¤ê³  í•œë‹¤. Kotlinì˜ Default Valuâ€¦","html":"<p>ì„œë²„ì—ì„œ REST APIë¥¼ êµ¬í˜„í•˜ì—¬ ë°ì´í„°ë¥¼ ë‹¤ë£°ë•ŒëŠ” Json ë°ì´í„° í˜•íƒœë¡œ ë§ì´ ë‹¤ë£¨ê²Œ ëœë‹¤. ì•ˆë“œë¡œì´ë“œì—ì„œ ì„œë²„ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ë•Œ í¸ë¦¬í•˜ê²Œ <code class=\"language-text\">Gson</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ ê°ì²´-Json ê°„ì˜ Converter ì‘ì—…ì„ í•˜ì˜€ì—ˆë‹¤. ì´ë²ˆì— êµ¬ê¸€ í”„ë¡œì íŠ¸ë¥¼ ë³´ë©´ì„œ ìƒˆë¡œìš´ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ë‹¤ë£° ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë³´ë ¤ê³  í•œë‹¤.</p>\n<h1>Kotlinì˜ Default Value</h1>\n<p>Gsonìœ¼ë¡œë„ ë°ì´í„°ì˜ ì§ë ¬í™”(ì—­ì§ë ¬í™”)ë¥¼ í•  ìˆ˜ ìˆì§€ë§Œ ì½”í‹€ë¦°ì˜ ë°ì´í„° í´ë˜ìŠ¤ì—ì„œ Dafault Valueë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ìë°”ë¡œ ë˜ì–´ìˆëŠ” Gsonì—ì„œëŠ” í•´ë‹¹ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— NPE ê°€ëŠ¥ì„±ì´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> gender<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> age<span class=\"token operator\">:</span> Int <span class=\"token operator\">=</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> hobby<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Work out\"</span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">val</span> jsonString <span class=\"token operator\">=</span> <span class=\"token string-literal multiline\"><span class=\"token string\">\"\"\"\n    {\n        \"name\" : \"ppeper\",\n        \"gender\" : \"Male\"\n    } \n\"\"\"</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">trimIndent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> user <span class=\"token operator\">=</span> <span class=\"token function\">Gson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromJson</span><span class=\"token punctuation\">(</span>jsonString<span class=\"token punctuation\">,</span> User<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>User(name=ppeper, gender=Male, age=0, hobby=null)</p>\n</blockquote>\n<p>ageì˜ ê°’ê³¼ hoppyì˜ ê°’ì— Default valueê°€ ìˆì§€ë§Œ Primitive typeì˜ ê²½ìš° 0, Reference typeì˜ ê²½ìš° nullë¡œ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.   ì½”í‹€ë¦°ì—ì„œëŠ” Null-Safety ë¥¼ í†µí•´ hobbyê°€ Not-Null typeì´ì§€ë§Œ nullì´ ë“¤ì–´ìˆì–´ ê°œë°œì‹œì— ì˜ëª»í•œë‹¤ë©´ NPEê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<h1>Kotlinx Serialization</h1>\n<p>ì½”í‹€ë¦°ì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì œê³µí•˜ê³  ìˆëŠ” <strong>Kotlinx Serialization</strong> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Kotlinì—ì„œ ì‚¬ìš©í•˜ë©´ ìœ„ì™€ ê°™ì€ Default valueì˜ ìƒí™©ì—ì„œë„ ì •ìƒì ìœ¼ë¡œ ê°’ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆìœ¼ë©° ë‹¤ë¥¸ Converterë“¤ê³¼ ë‹¤ë¥´ê²Œ Reflectionì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  KSerializerì„ ì‚¬ìš©í•œë‹¤.</p>\n<p>ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ë³€í™˜í•˜ê³ ìí•˜ëŠ” Classì— <code class=\"language-text\">@Serializable</code> ì–´ë…¸í…Œì´ì…˜ë§Œ ì¶”ê°€í•´ ì£¼ë©´ ëœë‹¤.\nì´ ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ë©´ í”ŒëŸ¬ê·¸ì¸ì´ ìë™ìœ¼ë¡œ í•´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ì˜ companion objectì— <code class=\"language-text\">serializer()</code> í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ì´ í•¨ìˆ˜ëŠ” <strong>KSerializer</strong> íƒ€ì…ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•˜ì—¬ ì§ë ¬í™”í• ë•Œ ì‚¬ìš©ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">plugins <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">kotlin</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"plugin.serialization\"</span></span><span class=\"token punctuation\">)</span> version <span class=\"token string-literal singleline\"><span class=\"token string\">\"1.9.22\"</span></span>\n<span class=\"token punctuation\">}</span>\n\ndependencies <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">implementation</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"org.jetbrains.kotlinx:kotlinx-serialization-json:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">latest_version</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation builtin\">@Serializable</span>\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> gender<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> age<span class=\"token operator\">:</span> Int <span class=\"token operator\">=</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> hobby<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Work out\"</span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">val</span> jsonString <span class=\"token operator\">=</span> <span class=\"token string-literal multiline\"><span class=\"token string\">\"\"\"\n    {\n        \"name\" : \"ppeper\",\n        \"gender\" : \"Male\"\n    } \n\"\"\"</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">trimIndent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> user <span class=\"token operator\">=</span> Json<span class=\"token punctuation\">.</span>decodeFromString<span class=\"token operator\">&lt;</span>User<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>jsonString<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>User(name=ppeper, gender=Male, age=28, hobby=Work out)</p>\n</blockquote>\n<p>Default Valueë¥¼ ì„¤ì •í•œ í”„ë¡œí¼í‹° ê°’ë“¤ì´ ì„±ê³µì ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. kotlinx.serializationì—ì„œ Json ê´€ë ¨í•œ ì—¬ëŸ¬ ì˜µì…˜ì¶”ê°€í•˜ì—¬ ì…ë§›ì— ë§ê²Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>\n<h2>ignoreKnownKeys</h2>\n<p>ë³´í†µ Modelë¡œ ë‹¤ì‹œ íŒŒì‹±ì„ í• ë•Œ Jsonì— ìˆëŠ” Keyê°’ê³¼ Modelì˜ ë©¤ë²„ ë³€ìˆ˜ì™€ mappingì´ ë˜ì–´í– í•œë‹¤. ì´ë•Œ Jsonì— ìˆëŠ” Key ê°’ì´ Modelì— ì—†ì„ ë•Œ ì´ë¥¼ ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” <code class=\"language-text\">ignoreKnwonKeys</code> ì˜µì…˜ì„ ì„¤ì •í•´ ë†“ìœ¼ë©´ Modelì—ì„œ ìˆëŠ” ë©¤ë²„ ë³€ìˆ˜ì˜ ê°’ë“¤ë§Œ íŒŒì‹±ì´ ëœë‹¤.</p>\n<p>í•´ë‹¹ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ Exceptionì„ í†µí•´ ì•Œì§€ ëª»í•˜ëŠ” ê°’ì„ ì¶œë ¥í•´ì¤€ë‹¤.</p>\n<blockquote>\n<p>Exception in thread \"main\" kotlinx.serialization.json.internal.JsonDecodingException: Unexpected JSON token at offset 53: Encountered an unknown key 'id' at path: $.gender\nUse 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> jsonString <span class=\"token operator\">=</span> <span class=\"token string-literal multiline\"><span class=\"token string\">\"\"\"\n    {\n        \"name\" : \"ppeper\",\n        \"gender\" : \"Male\",\n        \"id\" : \"1\"\n    } \n\"\"\"</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">trimIndent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> json <span class=\"token operator\">=</span> Json <span class=\"token punctuation\">{</span> ignoreUnknownKeys <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> decodeToString <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>decodeFromString<span class=\"token operator\">&lt;</span>User<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>jsonString<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>decodeToString<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>User(name=ppeper, gender=Male, age=28, hobby=Work out)</p>\n</blockquote>\n<p> ì´ì™¸ì—ë„ ê³µì‹ <a href=\"https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/builtin-classes.md#enum-classes\">Kotlin Serialization</a>ì„ ë³´ë©´ ì§ë ¬í™” ëŒ€ìƒ Modelì˜ ë©¤ë²„ ë³€ìˆ˜ì— ë‹¤ì–‘í•œ ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ì•ˆë“œë¡œì´ë“œì—ì„œ Retrofitì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ì´ë¥¼ìœ„í•œ <a href=\"https://github.com/JakeWharton/retrofit2-kotlinx-serialization-converter\">Converter</a>ë„ í˜„ì¬ ì œê³µí•˜ê³  ìˆë‹¤.</p>\n<hr>\n<h1>References</h1>\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/serialization.html#what-s-next\">https://kotlinlang.org/docs/serialization.html#what-s-next</a></li>\n<li><a href=\"https://github.com/google/gson\">https://github.com/google/gson</a></li>\n</ul>","frontmatter":{"title":"ì½”í‹‘ë¦°ì„ ìœ„í•œ Kotlinx Serizalization","date":"March 07, 2024","update":"March 07, 2024","tags":["Kotlin","Serizalization"],"series":"Kotlin"},"fields":{"slug":"/serialization/","readingTime":{"minutes":4.505}}},"seriesList":{"edges":[{"node":{"id":"a7e9c7fb-11d9-59aa-b9c8-faef6cfcd27e","fields":{"slug":"/scope-function/"},"frontmatter":{"title":"ì½”í‹€ë¦°ì˜ Scope FunctionëŠ” ì–¸ì œì“¸ê¹Œ"}}},{"node":{"id":"995d0539-ea55-5757-b642-d423a2fef20c","fields":{"slug":"/sort/"},"frontmatter":{"title":"ì½”í‹€ë¦° ë¦¬ìŠ¤íŠ¸ ì •ë ¬í•˜ëŠ” ë°©ë²• (sort vs sortBy vs sortWith)"}}},{"node":{"id":"b0b78929-653d-5d49-a7cf-79c5069f2dab","fields":{"slug":"/generic-in-out/"},"frontmatter":{"title":"Kotlin ì œë„¤ë¦­ì˜ in, out í‚¤ì›Œë“œ?"}}},{"node":{"id":"33959bf6-d080-5100-ac93-0be970a5d159","fields":{"slug":"/flow/"},"frontmatter":{"title":"Kotlin Coroutines Flow ë§›ë³´ê¸°"}}},{"node":{"id":"770fa80e-3899-50bc-a219-6f0a4abde7eb","fields":{"slug":"/serialization/"},"frontmatter":{"title":"ì½”í‹‘ë¦°ì„ ìœ„í•œ Kotlinx Serizalization"}}},{"node":{"id":"1da09158-79bc-54c5-8886-5cf392f4154f","fields":{"slug":"/ktor/"},"frontmatter":{"title":"KMPë¥¼ ì§€ì›í•˜ëŠ” Ktor Clientë¥¼ ì‚¬ìš©í•´ë³´ì"}}}]},"previous":{"fields":{"slug":"/goodbye-2023/"},"frontmatter":{"title":"2023ë…„ í•œí•´ íšŒê³ ë¡"}},"next":{"fields":{"slug":"/compose-theme/"},"frontmatter":{"title":"Compose ë‚˜ë§Œì˜ Custom Theme ì„¤ì •í•˜ê¸°"}}},"pageContext":{"id":"770fa80e-3899-50bc-a219-6f0a4abde7eb","series":"Kotlin","previousPostId":"3cbf6d19-48fa-5a8b-b1ef-bc34487fb600","nextPostId":"9d857459-0fd2-5d37-8f39-eceec94e02b2"}},"staticQueryHashes":[],"slicesMap":{}}